<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html dir="ltr"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.10570.1001"></meta></head><body>
<p>Installing updates allows to automatically install configuration updates from a file.</p>
<p>Use <strong>Install updates and fixes (patches)</strong> in the <strong>Administration - Maintenance - Program update</strong> section to open.</p>
<p>The program updates the IB configuration in 1C:Enterprise mode. Updates are performed on demand or at a specific time.</p>
<p>Warning! The assistant should not be used if the metadata objects editing capability is enabled in the program. In such cases, it is recommended to update in <strong>Designer</strong> mode. </p>
<p>The update installation source is selected in the first step. If you already have an update file, the assistant allows you to update using the update delivery file (.cfu) or the configuration delivery file (.cf) from a local or network directory. If the update file is already imported into the main configuration, and it differs from the infobase configuration, you need to specify the update option without using the update file.</p>
<h3><a name="#2">Retrieving updates from a file in a local or network directory</a></h3>
<p>If the update file already exists, you should use the configuration update mode from file. </p>
<ul><li>In the first page, the assistant asks you to specify the update file location: 
<ul><li>
<p><strong>Update file is not required because it is already imported into the main configuration</strong>. </p>
<ul><li>
<p>If the update file has already been imported into the main configuration, and it needs to be applied to the infobase configuration, then select this option. This feature can be used, for example, when updating the configuration of a distributed infobase node.</p></li></ul></li><li>
<p><strong>Specify update file</strong> - use <img src="StdPicture.InputFieldSelect"></img><strong>Select</strong> button to specify the file path on a computer. </p>
<ul><li>Configuration update cfu. file or configuration delivery cf. file can be specified as file, for example, <strong>E:\1Cits\EXE\Migration\1Cv8.cf</strong>. </li></ul></li><li>Click <strong>Next</strong> to continue the update.</li></ul></li><li>After clicking the <strong>Next</strong> button, the program receives the update file from a local or network directory, for example, from a 1C:ITS disk locally to a computer. </li></ul><p>Retireiving the update file from the 1C:ITS disk can take a long time, depending on the size of the specific file and the performance of the computer.</p>
<h3>Installing updates </h3>
<p>After the update has been received locally on the computer, the assistant offers to install it.</p>
<ul><li>The update is installed as the current user. Enter <strong>Infobase administration parameters - Username</strong> and <strong>Password</strong>, if the login is required to access the infobase. In the case of client/server program mode, you may also need to enter the server cluster administrator name and password. 
</li><li>It is recommended to create a infobase <a href="DataProcessor.InstallUpdates.Form.BackupSettings/Help">backup</a> before starting the program version update. The backup is used to automatically restore the infobase in case of emergency. Settings of automatic backup in file mode can be accessed using <strong>Create temporary IB backup and perform rollback in case of error</strong>. 
<ul><li>If the third-party tools are used for backup, you can disable automatic backup <strong>Create temporary IB backup and perform rollback in case of error</strong> at the bottom of the wizard page. You can create a backup using other tools, for example, by copying the infobase file. In the client/server mode, it is recommended to create a backup independently using the SQL server.</li></ul></li><li>You can specify the time for updating the IB configuration using the radio button: 
<ul><li><strong>Install the update right now</strong> — a restart is required for the update. 
</li><li><strong>Remind on exiting</strong>. 
</li><li><strong>Schedule the update for the specified time</strong> - it is possible <a href="#3">to specify the time and date of the configuration update</a> in the client/server mode. </li></ul></li><li>Before proceeding with the configuration update, you must save the unsaved data or close the windows for editing them. 
</li><li>In the client/server program mode, all the connections will be closed automatically, and the connection are blocked during backup creating and configuration update. 
</li><li>The following steps are required for the file mode: 
<ul><li>If Designer is open, close it. 
</li><li><a href="DataProcessor.ApplicationLock/Help">Terminate client sessions</a>. <a href="DataProcessor.ActiveUsers/Help">To monitor current sessions</a>, click <strong>View active users list</strong>. 
</li><li>If the other programs are connected to the program in external connection mode, they must be terminated.</li></ul></li><li>If all the specified conditions are met, the program will automatically create an IB backup (if it is configured accordingly) and update the configuration after clicking <strong>Next</strong> button. 
</li><li>The program update process can take a long time, depending on the performance of the computer and the infobase size. Do not turn off the computer until the process is complete. 
</li><li>After the configuration update is completed, the program will be automatically started and ready for further use. For basic configuration versions, it is necessary to perform the first run of the program after update as an administrator, during which the configuration update process will be completed. 
</li><li>The wizard displays a message about the successful program update. Use <strong>New in this version</strong> to view <a href="CommonForm.ApplicationReleaseNotes/Help">program change description</a>. Click <strong>Finish</strong> to start using the program. 
</li><li>If the program provides a <a href="DataProcessor.ApplicationUpdateResult.Form.DeferredIBUpdateProgressIndicator/Help">pending update</a>, a warning is displayed about the need to review <strong>additional guidance</strong> to complete the update. Follow the respective link.</li></ul><h3><a name="#3">Scheduling updates</a></h3>
<ul><li>You can set a delayed update when using client/server program mode. For example, you can postpone the configuration update for the night. 
</li><li>To do this, when updating the configuration in the wizard, select <strong>Schedule update installation for the specified time</strong> using the radio button and specify time and date of the update. 
</li><li>It is possible to configure sending a report to the specified email address after update success or failure. The message is sent from the computer where the 1C: Enterprise server is installed. To do this, check <strong>Email report</strong> check box and write an email address.</li></ul><p class="Important">The scheduled update will be completed from the client computer in the background. On the specified date and time, the computer must be powered on.</p>
<h3>Problems when retrieving and installing updates</h3>
<p>The special wizard page displays a message about the impossibility of updating the program.</p>
<ul><li>You can use the following tools to obtain technical information on the causes of updates retrieving and installing problems: 
<ul><li>Records of the operations performed and errors that occurred during the update are logged in the <strong>Event log</strong> ("Infobase update" event type). Use <strong>Go to event log</strong> to view <a href="DataProcessor.EventLog/Help">technical details</a>. 
</li><li>During the update installation, a log file with the update progress logs is created in the temporary folder of the current Windows user (the log file contents is then automatically added to the <strong>Event log</strong>). The last of the <strong>%temp%\1CUpdate.&lt;set of numbers&gt;, </strong>directories, when sorted alphabetically, corresponds to the last update session. </li></ul></li></ul><blockquote style="MARGIN-RIGHT: 0px" dir="ltr">
<p class="Important">If the "Language for non-Unicode programs" operating system setting is set incorrectly, the update process will result in "invalid procedure call or arguments" error and the log file will be empty. To remove this error, it is necessary to select Russian in the <strong>Language for non-Unicode programs</strong> field of the operating system regional settings (<strong>Control Panel - Region and Language - Advanced</strong>).</p></blockquote>
<ul><ul><li>The result of inforbase update is logged in the <strong>Windows Event Log</strong> (Event Log).<br></li></ul><li>If the infobase has been locked during the update as a result of an exception, it can be unlocked using the <strong>1C:Enterprise servers administration</strong> console, or from the command line by starting 1C:Enterprise as administrator with the <strong>AllowUserLogon</strong> key and specifying the <strong>BatchIBConfigurationUpdate</strong> unlock code . Example:</li></ul><p class="SourceCode">"C:\Program Files\1cv82\bin\1cv8.exe"ENTERPRISE /S"server\base" /N"Administrator" /P"" /WA- /CAllowUserOperations /UCBatchIBConfigurationUpdate</p>
<ul><li>If the configuration update failed, and there is an following entry in the temporary log file: "Exception in createConnection: Error, Automation server can't create object", then the 32-bit <strong>comcntr.dll</strong> component is most likely used on a PC running a 64-bit operating system. To fix this problem, take 64-bit <strong>comcntr.dll</strong> component from the 1C Enterprise x64 Server distribution and register it by running from the command line:</li></ul><p class="SourceCode">regsvr32 &lt;64-bit comcntr.dll location&gt;\comcntr.dll</p>
<p>After identifying the error causes, make the relevant PC settings, then click <strong>Next</strong> to retry. </p>
<h3>See also:</h3>
<ul><li><a href="v8help://frame/form_common">Working with forms</a></li></ul></body></html>